<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="Customer.js"></script>
</head>
<body>
<script>
    let listCustomer = [];
    let reCMND = RegExp("^([0-9]{8})$");
    let reBirthday = /^[0-31]{1,2}\/[0-12]{1,2}\/[1000-9999]{4}$/;
    let reEmail = /^[a-z\_\.\-]{2,20}\@[a-z\_\-]{2,20}\.[a-z]{2,9}$/;
    function displayMainMenu() {
            let choose = parseInt(prompt("1.Add new customer" +
                "\n2.Display Information Customer" +
                "\n3.Display total pays customer" +
                "\n4.Edit Information Customer" +
                "\n5.Delete Customer" + "\n6.Exit"));
            switch (choose) {
                case 1:
                    addNewCustomer();
                    break;
                case 2:
                    displayCustomers();
                    break;
                case 3:
                    displayTotalPays();
                    break;
                case 4:
                    editCustomer();
                    break;
                case 5:
                    deleteCustomer();
                    break;
                default :
                    alert("Fail");
            }
    }
    function displayTotalPays() {
        let temp="";
        for(let i=0;i<listCustomer.length;i++){
            temp+=i+ ". Tên " + listCustomer[i].getName() + "\n";
        }
        let chooseDisplay=parseInt(prompt(temp));
        alert("Tổng tiền phải trả : " + listCustomer[chooseDisplay].totalPays());
        displayMainMenu();
    }

    function addNewCustomer() {
        let cus = new Customer();
        let check=false;
        let cmnd;
        let birthday;
        let email;
        let name = prompt("Nhập vào tên :");
        do {
            cmnd=prompt("Nhập cmnd :");
            if (reCMND.test(cmnd)){
                check=true;
            }else {
                alert("CMND không hợp lệ , vui lòng nhập lại");
            }
        }while (!check);
        check =false;
        do {
            birthday = prompt("Nhập ngày sinh :");
            if(reBirthday.test(birthday)){
                check=true;
            }else {
                alert("Ngày sinh không hợp lệ , vui lòng nhập lại");
            }
        }while (!check);
        check=false;
        do {
            email = prompt("Nhập Email :");
            if (reEmail.test(email)){
                check=true;
            }else{
                alert("Email không hợp lệ , vui lòng nhập lại");
            }
        }while (!check);
        let address = prompt("Nhập địa chỉ :");
        let typeService = prompt("Nhập loại dịch vụ :");
        let typeRoom = prompt("Nhập loại room :");
        let typeCustomer = prompt("Nhập loại khách hàng :");
        let discount = parseInt(prompt("Giảm giá :"));
        let quantityIncluded = parseInt(prompt("Nhập số lượng đi kèm :"));
        let rentDays = parseInt(prompt("Nhập số ngày :"));
        cus.setName(name);
        cus.setCMND(cmnd);
        cus.setBirthday(birthday);
        cus.setEmail(email);
        cus.setAddress(address);
        cus.setTypeCustomer(typeCustomer);
        cus.setTypeService(typeService);
        cus.setTypeRoom(typeRoom);
        cus.setDiscount(discount);
        cus.setQuantityIncluded(quantityIncluded);
        cus.setRentDays(rentDays);
        listCustomer.push(cus);
        alert("Bạn đã thêm thành công ");
        displayMainMenu();
    }
    function getDisplayListCustomer() {
        let list = "";
        for (let i = 0; i < listCustomer.length; i++) {
            list += (1 + i) + ". " + listCustomer[i].getName() + "\n"
        }
        return list;
    }
    function getDisplayInfoCustomer() {
        for (let i=0;i<listCustomer.length;i++) {
            let cus = "1.Tên : " + listCustomer[i].getName() + "\n" +
                "2.CMND : " + listCustomer[i].getCMND() + "\n" +
                "3.Ngày sinh : " + listCustomer[i].getBirthday() + "\n" +
                "4.Email : " + listCustomer[i].getEmail() + "\n" +
                "5.Địa chỉ : " + listCustomer[i].getAddress() + "\n" +
                "6.Loại dịch vụ : " + listCustomer[i].getTypeService() + "\n" +
                "7.Loại phòng : " + listCustomer[i].getTypeRoom() + "\n" +
                "8.Loại khách hàng : " + listCustomer[i].getTypeCustomer() + "\n" +
                "9.Giảm giá : " + listCustomer[i].getDiscount() + "\n" +
                "10.Số lượng đi kèm : " + listCustomer[i].getQuantityIncluded() + "\n" +
                "11.Số Ngày : " + listCustomer[i].getRentDays();
            return cus;
        }
        displayMainMenu();
    }
    function displayCustomers() {
        let choose1 = prompt("Danh sách khách hàng  \n" +
            getDisplayListCustomer());
        let choose2=parseInt(prompt("Thông tin khách hàng \n" + getDisplayInfoCustomer(choose1 -1)));
        displayMainMenu();
    }
    function editCustomer() {
        let choose1 = prompt("Chọn khách hàng cần sửa \n" +
            getDisplayListCustomer());
        let choose2 = parseInt(prompt("Chọn thuộc tính cần sửa \n" +
            getDisplayInfoCustomer(choose1 - 1)));
        switch (choose2) {
            case 1:
                listCustomer[choose1 - 1].setName=prompt("Nhập tên");
                break;
            case 2:
                listCustomer[choose1 - 1][1]=prompt("Nhập CMND");
                break;
            case 3:
                listCustomer[choose1 - 1][2]=prompt("Nhập ngày sinh");
                break;
            case 4:
                listCustomer[choose1 - 1][3]=prompt("Nhập Email");
                break;
            case 5:
                listCustomer[choose1 - 1][4]=prompt("Nhập địa chỉ");
                break;
            case 6:
               listCustomer[choose1 - 1][5]=prompt("Nhập Loại dịch vụ ");
                break;
            case 7:
                listCustomer[choose1 - 1][6]=prompt("Nhập loại room ");
                break;
            case 8:
                listCustomer[choose1 - 1][7]=prompt("Nhập loại khách hàng ");
                break;
            case 9:
               listCustomer[choose1 - 1][8]=prompt("Giảm giá ");
                break;
            case 10:
                listCustomer[choose1 - 1][9]=prompt("Số lượng đi kèm ");
                break;
            case 11:
                listCustomer[choose1 - 1][10]=prompt("Số ngày ");
                break;
            default:
                alert("Fail");

        }
        displayMainMenu();

    }
    displayMainMenu();
</script>
</body>
</html>